# Chrome Download Manager - 智能下载管理器

一个功能强大的 Chrome 浏览器扩展，提供高级下载管理功能，包括多线程分块下载、断点续传和独立的下载记录管理。

## ✨ 核心功能

### 🚀 高速下载
- **多线程分块下载**：自动将文件分成多个块并行下载，显著提升下载速度
- **实时速度显示**：在下载列表中实时显示下载速度（如 `2.5 MB/s`）
- **智能策略**：
  - 小文件（≤ 50MB）：使用分块下载 + 内存合并
  - 大文件（> 50MB）：使用分块下载后通过原生下载保存，避免内存问题

### ⏸️ 断点续传
- **真正的断点续传**：暂停后可从中断位置继续下载，无需重新开始
- **分块进度记录**：记录每个分块的下载进度，精确恢复
- **会话内有效**：支持同一会话内的暂停/恢复（浏览器重启后需重新下载）

### 📋 独立下载管理
- **独立记录系统**：下载记录在扩展内部独立管理，不与浏览器原生历史同步
- **自动拦截**：拦截浏览器默认下载，使用自定义下载器处理
- **完整控制**：支持暂停、恢复、取消、删除等操作

### 🎨 用户界面
- **实时进度条**：平滑更新的进度条，显示下载进度
- **状态指示**：清晰的状态图标（进行中、已暂停、已完成、已中断）
- **批量操作**：支持批量暂停、恢复、取消、删除
- **多语言支持**：支持英语、简体中文、韩语、日语
- **下载筛选**：按状态筛选（全部、进行中、已完成、已中断、已暂停）

### 🛠️ 其他功能
- **文件管理**：点击文件夹图标在系统文件管理器中打开文件位置
- **导出/导入**：导出下载记录为 JSON 文件，支持导入恢复
- **清除已完成**：一键清除所有已完成的下载记录

## 🔧 技术实现

- **分块下载引擎**：使用 `fetch` API 和 `Range` 请求实现多线程下载
- **Service Worker**：基于 Manifest V3 的后台服务
- **实时通信**：通过 `chrome.runtime.sendMessage` 实现实时进度更新
- **状态管理**：使用 `chrome.storage.local` 持久化下载记录

## 📦 安装方法

1. 克隆或下载此仓库
2. 打开 Chrome 浏览器，访问 `chrome://extensions/`
3. 启用右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹

## 🎯 使用方法

### 开始下载
- 点击网页上的下载链接，扩展会自动拦截并使用高速下载
- 或在扩展弹窗中输入下载链接，点击"添加下载"

### 管理下载
- 点击扩展图标打开下载管理界面
- 使用暂停/恢复按钮控制下载
- 点击文件夹图标打开文件位置
- 使用筛选器查看不同状态的下载

### 批量操作
- 勾选多个下载项
- 使用批量操作按钮（暂停、恢复、取消、删除）

##  文件结构

```
chrome-download-manager/
├── manifest.json          # 扩展配置文件
├── popup.html             # 弹出界面 HTML
├── popup.css              # 弹出界面样式
├── popup.js               # 弹出界面逻辑
├── js/
│   ├── background.js      # 后台脚本（下载管理）
│   ├── content.js         # 内容脚本
│   └── core/
│       └── downloader.js  # 核心下载引擎
├── _locales/              # 多语言支持
│   ├── en/
│   ├── zh_CN/
│   ├── ko/
│   └── ja/
└── icons/                 # 图标文件夹
    ├── icon16.png
    ├── icon32.png
    ├── icon48.png
    └── icon128.png
```

## ⚠️ 已知限制

- **内存占用**：大文件（> 100MB）下载时内存占用较高
- **会话持久化**：断点续传仅在同一会话内有效，浏览器重启后无法恢复
- **Data URL 限制**：超大文件（> 50MB）使用原生下载保存以避免性能问题

## 🔍 常见问题

### 扩展无法安装
- 确保已开启开发者模式
- 检查文件夹结构是否正确
- 确认 manifest.json 格式正确

### 下载不显示
- 刷新扩展页面
- 检查浏览器权限设置
- 重新加载扩展

### 调试方法
1. 打开 Chrome 开发者工具
2. 查看 Console 标签页的错误信息
3. 在 Extensions 页面检查扩展状态

## � 未来计划

- [ ] 使用 IndexedDB 实现跨会话断点续传
- [ ] 支持 File System Access API 以处理超大文件
- [ ] 添加下载速度限制功能
- [ ] 支持下载任务调度和优先级
- [ ] 添加文件完整性校验（MD5/SHA256）
- [ ] 下载队列管理
- [ ] 自动重试失败下载
- [ ] 主题自定义

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来帮助改进这个项目！

---

**享受更好的下载体验！** 🚀
